---
version: 0.1.0
alias: Test0001_input_portDemo4
discoveryPort:
  name: Demo S3 and Vertica4
  shortDescription: Weather Forecast S3
  longDescription: Weather Forecast Details
  tags:
    - MAF Data
    - Schedule Run
  domain: ['Finance']
  function: ['Forecast']
  regulatoryFields:
    dataPrivacy: public
    customerInfo: nonPII
    dataOrigin: machineGenerated
    monetaryInfo: nonFinancialData
inputPorts:
  - alias: Test_input_port290
    description: string2
    type: s3-csv
    tags: []
    syncType: pull
    connectionUrn: urn:dv:connection:308c470d-0c06-4fe4-beaf-eec65f92851a
    dataSet:
      path: s3://dp-input-bucket/mpay-tx/mpay-tx.csv
      advanceOptions:
        delimiter: ','
        header: true
productState:
  updateType: 'scheduled'
  updateSchedule: "*/2 * * * *"
  updateStrategy: append
  logicalSchema:
    properties:
      store_group_name:
        type: string
      store_name:
        type: string
      transaction_reference:
        type: string
      created_date:
        type: datetime
      amount:
        type: string
transformation:
  - alias: Test_input_port_trans1
    description: step_1
    type: sql
    sequenceNo: 1
    stepName: one
    query: SELECT store_group_name,store_name,transaction_reference,created_date,amount FROM Test_input_port290 where amount > 200
outputPort:
  subscriptionChannels:
    - channelType: rest-api
      queryType: sql
    - channelType: jdbc
      queryType: sql
  updateChannels:
    - type: vertica-table
      syncType: push
      connectionUrn: urn:dv:connection:f4cba947-fcef-47f1-b48c-aac532522d90
      dataSet:
        tableName: demo_data_table
    - type: s3-csv
      syncType: push
      connectionUrn: urn:dv:connection:d277aa22-c3d0-40bc-8816-79f2daabc0f8
      dataSet:
        path: s3://dp-input-bucket/demo_data_table
